# VK User Info Scraper с интеграцией Neo4j

## Описание

Скрипт на Python для сбора информации о пользователе ВКонтакте (VK), его фолловерах, подписках и группах. Данные сохраняются в базе данных Neo4j, создавая узлы для пользователей и групп, а также связи между ними. Скрипт также позволяет выполнять запросы для получения статистики по собранной информации. Проект поддерживает гибкую настройку логирования.

## Установка

1. Склонируйте репозиторий:

    ```bash
    git clone https://github.com/Rendei/OTRPO_Lab4.git
    cd OTRPO_Lab4
    ```

2. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```


## Конфигурация

1. Создайте файл config.json (в репозитории лежит его шаблон) в корне проекта и добавьте в него значения:

    ```json
    {
    "access_token": "YOUR_ACCESS_TOKEN",
    "neo4j_uri": ,
    "neo4j_user": "neo4j",
    "neo4j_password": "neo4j_password",
    "version": "5.199"
    }
    ```

## Использование

Запустите скрипт из командной строки или терминала:

    ```bash
    python main.py [опции]
    ```

Опции:
1. --user_id — идентификатор пользователя ВК. Если не указан, используется авторизованный пользователь.
2. --query — тип запроса для получения статистики из Neo4j:
3. users_count — общее количество пользователей.
4. groups_count — общее количество групп.
5. top_users_by_followers — топ-5 пользователей по количеству фолловеров.
6. top_groups_by_subscribers — топ-5 групп по количеству подписчиков.
7. mutual_followers — все пользователи, которые являются фолловерами друг друга.


Настройки логирования
1. --log_level — уровень логирования (DEBUG, INFO, WARNING, ERROR, CRITICAL). По умолчанию — INFO.
2. --log_file — файл для записи логов (если выбрана запись в файл).
3. --log_output — вывод логов (console или file). По умолчанию — console.

Примеры использования
1. Собрать информацию о пользователе и его окружении:
    ```bash
    python main.py --user_id <ID пользователя ВК>
    ```

2. Запросить топ-5 пользователей по количеству фолловеров и записать логи в файл:
    ```bash
    python main.py --query top_users_by_followers --log_output file --log_file app.log --log_level DEBUG
    ```

Структура проекта:
main.py — основной скрипт, который управляет сбором данных и выполнением запросов.
vk_parser.py — модуль для получения данных VK API.
neo4j_handler.py — модуль для управления взаимодействием с базой данных Neo4j.

Запросы для статистики
users_count: общее количество пользователей в базе.
groups_count: общее количество групп в базе.
top_users_by_followers: топ-5 пользователей по числу фолловеров.
top_groups_by_subscribers: топ-5 групп по числу подписчиков.
mutual_followers: пользователи, которые являются фолловерами друг друга.


